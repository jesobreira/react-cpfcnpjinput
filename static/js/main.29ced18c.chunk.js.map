{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["val","e","target","method","includes","String","this","props","type","maskField","maskBr","onChangeText","onChange","state","substr","offset","setTimeout","onKeyDown","getRawValue","onFocus","regexp","RegExp","replace","validateBr","render","handleFocus","App","useState","example1","setExample1","example2","setExample2","example3","setExample3","isValid1","setIsValid1","isValid2","setIsValid2","isValid3","setIsValid3","raw1","setRaw1","raw2","setRaw2","raw3","setRaw3","val1","setVal1","val2","setVal2","val3","setVal3","ref1","useRef","ref2","ref3","useEffect","current","isValid","getValue","ref","value","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.29ced18c.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { validateBr, maskBr } from 'js-brasil'\n\nclass CpfCnpjInput extends Component {\n\n\tstate = {\n\t\tval: \"\"\n\t}\n\n\tstatic getDerivedStateFromProps(props, state) {\n\t\tlet method\n\n\t\tif (['cpf', 'cnpj'].includes(String(props.type).toLowerCase())) {\n\t\t\tmethod = props.type.toLowerCase()\n\t\t} else {\n\t\t\tmethod = (props.value || \"\").replace(/[^0-9]/g, '').length>=12 ? 'cnpj' : 'cpf';\n\t\t}\n\n\t\t// now let's mask it\n\t\tlet maskField = props.maskField || '_'\n\t\tlet val = maskBr[method](props.value || \"\").replace(/_/g, maskField)\n\n\t\treturn { val }\n\t}\n\t\n\thandleChange = (e) => {\n\t\t// let's detect whether the user is typing a CPF or CNPJ\n\t\tlet method\n\t\tlet { target } = e\n\n\t\tif (['cpf', 'cnpj'].includes(String(this.props.type).toLowerCase())) {\n\t\t\tmethod = this.props.type.toLowerCase()\n\t\t} else {\n\t\t\tmethod = target.value.replace(/[^0-9]/g, '').length>=12 ? 'cnpj' : 'cpf';\n\t\t}\n\n\t\t// now let's mask it\n\t\tlet maskField = this.props.maskField || '_'\n\t\tlet val = maskBr[method](target.value).replace(/_/g, maskField)\n\t\tthis.setState({ val },\n\t\t\t// and the user may continue typing from the first maskField in the value\n\t\t\t() => target.setSelectionRange(val.indexOf(maskField), val.indexOf(maskField))\n\t\t)\n\n\t\t// callback, if any\n\t\ttypeof this.props.onChangeText === 'function' && this.props.onChangeText(val)\n\t\ttypeof this.props.onChange === 'function' && this.props.onChange(e)\n\t}\n\n\t// we need to handle keydown manually\n\t// to detect backspace (keycode 8) after a mask character (. / -)\n\thandleKeyDown = e => {\n\t\tif (e.keyCode === 8 && [\".\", \"/\", \"-\"].includes(this.state.val.substr(e.target.selectionStart-1, 1))) {\n\t\t\tlet { target } = e\n\t\t\tlet method\n\n\t\t\tif (['cpf', 'cnpj'].includes(String(this.props.type).toLowerCase())) {\n\t\t\t\tmethod = this.props.type.toLowerCase()\n\t\t\t} else {\n\t\t\t\tmethod = target.value.replace(/[^0-9]/g, '').length>=12 ? 'cnpj' : 'cpf';\n\t\t\t}\n\n\t\t\t// now let's mask it\n\t\t\tlet offset = e.target.selectionStart\n\t\t\tlet maskField = this.props.maskField || '_'\n\t\t\tlet val = maskBr[method](target.value.substr(0, offset-2)).replace(/_/g, maskField)\n\t\t\tthis.setState({ val })\n\n\t\t\t// and the user may continue typing from the first maskField in the value\n\t\t\tsetTimeout(() => target.setSelectionRange(offset-2, offset-2), 1)\n\t\t\t\n\n\t\t\t// callback, if any\n\t\t\ttypeof this.props.onChangeText === 'function' && this.props.onChangeText(val)\n\t\t}\n\n\t\t// call any user-provided callback\n\t\ttypeof this.props.onKeyDown === 'function' && this.props.onKeyDown(e)\n\t}\n\n\thandleFocus = e => {\n\t\t// move cursor to the first position on focus\n\t\t// if the value is empty\n\t\tif (this.getRawValue() === \"\") {\n\t\t\tlet { target } = e\n\t\t\tsetTimeout(() => target.setSelectionRange(0, 0), 1)\n\t\t}\n\n\t\t// call any user-provided callback\n\t\ttypeof this.props.onFocus === 'function' && this.props.onFocus(e)\n\t}\n\n\tgetValue = () => {\n\t\tlet regexp = new RegExp(\"([^0-9][\\\\-\\\\/\\\\.\\\\\" + (this.props.maskField || \"_\") + \"])\", \"g\")\n\t\tlet { val } = this.state\n\n\t\twhile (val.match(regexp)) {\n\t\t\tval = val.replace(regexp, \"\")\n\t\t}\n\n\t\tif (val.endsWith(this.props.maskField || \"_\"))\n\t\t\tval = val.substr(0, val.length-1)\n\n\t\treturn val.trim()\n\t}\n\n\tgetRawValue = () => this.state.val.replace(/[^0-9]/g, '').trim()\n\n\tisValid = (type) => {\n\t\tif (validateBr.cpf(this.state.val))\n\t\t\treturn type ? type === 'cpf' : 'cpf'\n\t\telse if (validateBr.cnpj(this.state.val))\n\t\t\treturn type ? type === 'cnpj' : 'cnpj'\n\t\telse\n\t\t\treturn false\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<input \n\t\t\t\ttype=\"text\"\n\t\t\t\t{...this.props}\n\t\t\t\tvalue={this.state.val}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\tonFocus={this.handleFocus}\n\t\t\t/>\n\t\t)\n\t}\n}\n\nexport default CpfCnpjInput","import React, { useState, useRef, useEffect } from 'react'\n\nimport CpfCnpjInput from 'cpf-cnpj-input'\n\nconst App = () => {\n\n\tconst [example1, setExample1] = useState(\"\")\n\tconst [example2, setExample2] = useState(\"\")\n\tconst [example3, setExample3] = useState(\"\")\n\n\tconst [isValid1, setIsValid1] = useState(false)\n\tconst [isValid2, setIsValid2] = useState(false)\n\tconst [isValid3, setIsValid3] = useState(false)\n\n\tconst [raw1, setRaw1] = useState(null)\n\tconst [raw2, setRaw2] = useState(null)\n\tconst [raw3, setRaw3] = useState(null)\n\n\tconst [val1, setVal1] = useState(null)\n\tconst [val2, setVal2] = useState(null)\n\tconst [val3, setVal3] = useState(null)\n\n\tconst ref1 = useRef(null)\n\tconst ref2 = useRef(null)\n\tconst ref3 = useRef(null)\n\n\tuseEffect(() => {\n\t\tsetIsValid1(ref1.current.isValid())\n\t\tsetRaw1(ref1.current.getRawValue())\n\t\tsetVal1(ref1.current.getValue())\n\n\t\tsetIsValid2(ref2.current.isValid())\n\t\tsetRaw2(ref2.current.getRawValue())\n\t\tsetVal2(ref2.current.getValue())\n\n\t\tsetIsValid3(ref3.current.isValid())\n\t\tsetRaw3(ref3.current.getRawValue())\n\t\tsetVal3(ref3.current.getValue())\n\t}, [example1, example2, example3])\n\n\treturn (\n\t<>\n\n  \t\t<h1>Default</h1>\n  \t\t<CpfCnpjInput\n  \t\t\tref={ref1}\n  \t\t\tvalue={example1}\n  \t\t\tonChangeText={setExample1}\n  \t\t/>\n  \t\t<p>Value: {val1}</p>\n  \t\t<p>Raw value: {raw1 }</p>\n  \t\t<p>Is valid: {isValid1 || 'false'}</p>\n  \t\t<pre>{`\n<CpfCnpjInput\n\tonChangeText={text => {}}\n/>\n  \t\t\t`}\n  \t\t</pre>\n  \t\t<hr/>\n  \t\t<h1>CPF only - * as mask field</h1>\n  \t\t<CpfCnpjInput\n  \t\t\tref={ref2}\n  \t\t\tvalue={example2}\n  \t\t\ttype='cpf'\n  \t\t\tmaskField='*'\n  \t\t\tonChangeText={setExample2}\n  \t\t/>\n  \t\t<p>Value: {val2}</p>\n  \t\t<p>Raw value: {raw2}</p>\n  \t\t<p>Is valid: {isValid2 || 'false'}</p>\n  \t\t<pre>{`\n<CpfCnpjInput\n\ttype='cpf'\n\tmaskField='*'\n\tonChangeText={text => {}}\n/>\n  \t\t\t`}\n  \t\t</pre>\n  \t\t<hr/>\n  \t\t<h1>CNPJ only - # as mask field</h1>\n  \t\t<CpfCnpjInput\n  \t\t\tref={ref3}\n  \t\t\tvalue={example3}\n  \t\t\ttype='cnpj'\n  \t\t\tmaskField='#'\n  \t\t\tonChangeText={setExample3}\n  \t\t/>\n  \t\t<p>Value: {val3}</p>\n  \t\t<p>Raw value: {raw3}</p>\n  \t\t<p>Is valid: {isValid3 || 'false'}</p>\n  \t\t<pre>{`\n<CpfCnpjInput\n\ttype='cnpj'\n\tmaskField='#'\n\tonChangeText={text => {}}\n/>\n  \t\t\t`}\n  \t\t</pre>\n  \t</>\n  \t)\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}